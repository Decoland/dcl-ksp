import{a as p,b as A}from"https://st-p.rmcdn.net/2ec2f837/dist/c/c-TMFZW6VH.js";import{a as T,b as Q}from"https://st-p.rmcdn.net/2ec2f837/dist/c/c-NBLXCZEY.js";import{a as P,c as N}from"https://st-p.rmcdn.net/2ec2f837/dist/c/c-WPVKPCDO.js";import{c as S,d as g,k as _}from"https://st-p.rmcdn.net/2ec2f837/dist/c/c-3WKB4E5O.js";import{b as J}from"https://st-p.rmcdn.net/2ec2f837/dist/c/c-4GXLZQJD.js";import{a as M}from"https://st-p.rmcdn.net/2ec2f837/dist/c/c-JPR5YHB4.js";var O,C,z,F=M(()=>{"use strict";J();_();O={Desktop:[1024,672],"iPhone SE":[320,568],"iPhone 11 Pro / X":[375,812],"Google Pixel 2 XL":[411,823],SamsungGalaxyS20:[360,800],"iPhone SE horizontal":[568,320],Tablet:[768,926]},C={default:"Desktop",phone_portrait:"iPhone SE",tablet_portrait:"Tablet"},z={Desktop:"default","iPhone SE":"phone_portrait","iPhone 11 Pro / X":"phone_portrait","Google Pixel 2 XL":"phone_portrait",SamsungGalaxyS20:"phone_portrait","iPhone SE horizontal":"tablet_portrait",Tablet:"tablet_portrait"}});function dt({viewportTopAndHeight:t,workspaceHeight:e}){let o=t.top<0?Math.abs(t.top):0,n=0;if(t.height<e)if(t.height-o+t.top<e)n=t.height-o;else{let s=t.top+t.height-e;n=t.height-o-s}else t.top<0?n=e:n=e-t.top;return n=n>0?n:0,n}function j(t,e,o=1,n){let s=e.x*o,r=e.y*o,i=e.w*o,l=e.h*o,c={left:s,top:r,width:i,height:l};return t&&(t!=="c"&&(t.indexOf("s")!==-1&&(c.top=n.height-r-l),t.indexOf("e")!==-1&&(c.left=n.width-s-i)),["n","c","s"].indexOf(t)!==-1&&(c.left=n.width/2-i/2+s),["w","c","e"].indexOf(t)!==-1&&(c.top=n.height/2-l/2+r),c.bottom=c.top+c.height,c.right=c.left+c.width),c}var G,tt,et,R,it,ot,D,v,V,K,W,L,nt,st,I,E,b,rt,ct,lt,X,ht,B,Bt,ft=M(()=>{"use strict";A();_();Q();N();F();G=(t,e,o)=>{let n=o&&z[o]===e?o:C[e],[s,r]=O[n];return p.cover({width:t,height:1/0},{width:s,height:r})},tt=t=>g[t].height||g[t].min_height,et=t=>g[t].width,R=(t,e)=>e==="phone_portrait"?t.phoneWidth||g.phone_portrait.width:e==="tablet_portrait"?g.tablet_portrait.width:t.desktopWidth||g.default.width,it=(t,e)=>{let o=e!=="default"?`viewport_${e}`:void 0;return o&&t[o]?.height?t[o]?.height:t.height?t.height:tt(e)},ot=(t,e,o)=>({width:R(t,o),height:it(e,o)}),D=(t,{windowSize:e,viewport:o="default",zoom:n=1,device:s})=>{if(P("constructor.splitView"))return{...t,left:o==="phone_portrait"?e.width-t.width-20:20,top:20};{let r=p.mapFromViewportToDocument(e,1,n,{scrollLeft:0,scrollTop:0}),i=v(t.width,{viewport:o,windowSize:e,device:s}),l=p.center(o==="phone_portrait"&&n>=1?i:t,r),c=o==="phone_portrait"?Math.max(p.center(i,e).top,0)/n:0;return{...t,left:Math.max(l.left,0),top:Math.max(l.top,c)}}},v=(t,{windowSize:e,viewport:o,device:n})=>{let s=n||S[o];return P("constructor.splitView")||o!=="default"?G(t,o,s):e},V=(t,{viewport:e="default",windowSize:o,device:n,zoom:s=1})=>{let r=v(t.width,{windowSize:o,device:n,viewport:e});if(P("constructor.splitView")){let i=D(t,{windowSize:o,viewport:e,zoom:s,device:n});return{left:i.left,top:i.top,width:r.width,height:r.height}}else{if(e==="default")return{left:0,top:0,width:r.width,height:r.height};{let i=r.width*s,l=Math.min(s<1?t.height*s:r.height,o.height);return p.center({width:i,height:l},o)}}},K=(t,e="default")=>{let o=p.center({width:et(e),height:t.height},t);return p.relativeToAbsolute(o,t)},W=(t,e="default")=>{let o=e!=="default"?`viewport_${e}`:void 0,n=(s={},r)=>({w:s.w??r.w,h:s.h??r.h,x:s.x??r.x,y:s.y??r.y,fixed_position:s.sticked?void 0:s.fixed_position??r.fixed_position});return n(o?t[o]:t,t)},L=(t=[])=>{let e=t[0],{x:o,y:n,w:s,h:r}=e||{};return t.reduce((i,l)=>{let c=Math.min(i.x,l.x),h=Math.min(i.y,l.y);return i.w=Math.max(i.x+i.w,l.x+l.w)-c,i.h=Math.max(i.y+i.h,l.y+l.h)-h,i.x=c,i.y=h,i},{x:o,y:n,w:s,h:r})},nt=(t,e)=>{let o=["nw","n","ne"].includes(e),n=["w","c","e"].includes(e),s=["nw","w","sw"].includes(e),r=["n","c","s"].includes(e);return{left:s?t.left:r?t.left+t.width/2:t.left+t.width,top:o?t.top:n?t.top+t.height/2:t.top+t.height}},st=(t,e,o={})=>{let{viewport:n}=e,s=t.map(r=>({...W(r,n),...o}));return b(s,e)},I=(t,e,o)=>{let{workspaceSize:n,viewport:s="default",windowSize:r,device:i,zoom:l=1}=o,c=V(n,{viewport:s,windowSize:r,device:i,zoom:l}),{width:h,height:d,left:f,top:u}=j(e,t,l,c);return p.relativeToAbsolute({width:h,height:d,left:f,top:u},c)},E=(t,e)=>{let{workspaceSize:o,viewport:n,windowSize:s,device:r,zoom:i=1,scroller:l}=e,c=D(o,{viewport:n,windowSize:s,device:r,zoom:i}),h={width:t.w,height:t.h,left:t.x,top:t.y},d=K(c,n),f=p.relativeToAbsolute(h,d);return p.mapFromDocumentToViewport(f,1,i,l)},b=(t,e)=>{let o=t.reduce((n,s)=>n!==s.fixed_position?"mixed":n,t[0]?.fixed_position);if(o==="mixed"){let n=t.map(c=>c.fixed_position?I(c,c.fixed_position,e):E(c,e)),{left:s,top:r,width:i,height:l}=T.getBoundingBoxOfBoxes(n);return{left:s,top:r,width:i,height:l}}else if(o){let n=t.length===1?t[0]:L(t);return I(n,o,e)}else{let n=t.length===1?t[0]:L(t);return E(n,e)}},rt=(t,e)=>{let o=t.map(l=>{let{left:c,top:h,width:d,height:f}=b([l],e),u=l.angle??0,a=l.fixed_position,x=Math.cos(u*Math.PI/180),m=Math.sin(u*Math.PI/180);return T.calcBoundingBox({left:c,top:h,width:d,height:f,cosAngle:x,sinAngle:m},a,!0)}),{left:n,top:s,width:r,height:i}=T.getBoundingBoxOfBoxes(o);return{left:n,top:s,width:r,height:i}},ct=(t,e,{workspaceSize:o,windowSize:n,viewport:s="default",zoom:r=1,scroller:i={scrollLeft:0,scrollTop:0},device:l})=>{if(e){let c=V(o,{viewport:s,windowSize:n,device:l,zoom:r}),h=["nw","n","ne"].includes(e),d=["w","c","e"].includes(e),f=["nw","w","sw"].includes(e),u=["n","c","s"].includes(e),a=["ne","e","se"].includes(e),x=["sw","s","se"].includes(e),m={left:f?t.left:u?t.left+t.width/2:t.left+t.width,top:h?t.top:d?t.top+t.height/2:t.top+t.height},w={left:f?c.left:u?c.left+c.width/2:c.left+c.width,top:h?c.top:d?c.top+c.height/2:c.top+c.height},y=p.absoluteToRelative(m,w),k=a?y.left*-1:y.left,U=x?y.top*-1:y.top,{left:Z,top:$,width:Y,height:q}=p.mapFromViewportToDocument({left:k,top:U,width:t.width,height:t.height},1,r,{scrollLeft:0,scrollTop:0});return{fixed_position:e,x:Z,y:$,w:Y,h:q}}else{let c=D(o,{viewport:s,windowSize:n,device:l,zoom:r}),h=p.mapFromViewportToDocument(t,1,r,i),d=K(c,s),{left:f,top:u,width:a,height:x}=p.absoluteToRelative(h,d);return{x:f,y:u,w:a,h:x}}},lt=(t,{workspaceSize:e,windowSize:o,viewport:n="default",zoom:s=1,device:r})=>{let i=W(t,n),l=i.fixed_position;if(l){let c=["nw","n","ne"].includes(l),h=["w","c","e"].includes(l),d=["nw","w","sw"].includes(l),f=["n","c","s"].includes(l),u=["ne","e","se"].includes(l),a=["sw","s","se"].includes(l),x=B.mapDeviceToWindow(e,{viewport:n,windowSize:o,device:r,zoom:s}),m=B.getFixedOrigin(x,l),w=p.invertPosition(m,o);return{position:"fixed",left:d||f?m.left+i.x+"px":"",top:c||h?m.top+i.y+"px":"",right:u?w.right+i.x+"px":"",bottom:a?w.bottom+i.y+"px":"","margin-left":f?-i.w/2+"px":"","margin-top":h?-i.h/2+"px":""}}else return{position:"absolute",left:t.x+"px",top:t.y+"px"}},X=({boxCoordinates:t,workspacePosition:e,windowSize:o,viewportType:n,scroller:s,zoom:r})=>{let i={x:t.x,y:t.y};if(!t.fixed_position)return{...i};if(n==="default"){let l=o.width/r,c=o.height/r,h=e.left,d=e.left+l/2-t.w/2,f=e.left+l-t.w,u=e.top,a=e.top+c/2-t.h/2,x=e.top+c-t.h;["nw","w","sw"].includes(t.fixed_position)?i.x=i.x+h:["n","c","s"].includes(t.fixed_position)?i.x=i.x+d:["ne","e","se"].includes(t.fixed_position)&&(i.x=f-i.x),["nw","n","ne"].includes(t.fixed_position)?i.y+=u:["e","c","w"].includes(t.fixed_position)?i.y+=a:["sw","s","se"].includes(t.fixed_position)&&(i.y=x-i.y)}else if(["phone_portrait","tablet_portrait"].includes(n)){let l=s.scrollLeft/r,c=s.scrollTop/r,h=o.width/r,d=o.height/r,f=l,u=e.left+h/2-t.w/2,a=e.left*2+h-t.w,x=c,m=e.top+d/2-t.h/2,w=e.top*2+d-t.h;["nw","w","sw"].includes(t.fixed_position)?i.x=i.x+f:["n","c","s"].includes(t.fixed_position)?i.x=i.x+u:["ne","e","se"].includes(t.fixed_position)&&(i.x=a-i.x-l),["nw","n","ne"].includes(t.fixed_position)?i.y=i.y+x:["e","c","w"].includes(t.fixed_position)?i.y+=m:["sw","s","se"].includes(t.fixed_position)&&(i.y=w-i.y-c)}return{...i}},ht=({boxCoordinates:t,workspaceBox:e,windowSize:o,viewportType:n,scroller:s,zoom:r})=>{let i={x:t.x,y:t.y},l=(e.width-g[n].width)/2;return i=X({workspacePosition:{left:e.left,top:e.top},boxCoordinates:t,scroller:s,windowSize:o,viewportType:n,zoom:r}),i.x=i.x-l,{...i}};B={fitToDevice:G,fixedToWorkspace:X,fixedToOrigin:ht,mapDeviceToWindow:V,getPageWidth:R,getWorkspaceSize:ot,getDeviceSize:v,getCoordinateBox:W,getFixedOrigin:nt,getHeightOfVisiblePartOfWorkspace:dt,mapWorkspaceToDocument:D,mapWidgetToWindow:st,coordinatesToClientBox:b,coordinatesToClientBoundingBox:rt,mapWidgetToWorkspace:ct,mapWidgetToCss:lt,getFixedPositionBox:j},Bt=B});export{C as a,z as b,F as c,ht as d,Bt as e,ft as f};
