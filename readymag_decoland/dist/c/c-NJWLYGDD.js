import{a as y,b as C}from"https://st-p.rmcdn.net/2ec2f837/dist/c/c-7A3RDGLV.js";import{a as g,g as _}from"https://st-p.rmcdn.net/2ec2f837/dist/c/c-HJ6CUHFE.js";import{a as h,b as M}from"https://st-p.rmcdn.net/2ec2f837/dist/c/c-DYZTW7WS.js";import{a as b,b as w}from"https://st-p.rmcdn.net/2ec2f837/dist/c/c-3JAOSRQL.js";import{C as f,D as d,E as p,F as m}from"https://st-p.rmcdn.net/2ec2f837/dist/c/c-U4GS6NTD.js";import{a as V}from"https://st-p.rmcdn.net/2ec2f837/dist/c/c-IFNIQOEY.js";import{b as r,c as x}from"https://st-p.rmcdn.net/2ec2f837/dist/c/c-DHS3XUYJ.js";import{a as c,d as P}from"https://st-p.rmcdn.net/2ec2f837/dist/c/c-JPR5YHB4.js";function $({thumbnailMode:e,thumbnailUrl:o,loop:a,videoUrl:i,playing:l,onLoaded:k,onPlay:v}){let s=(0,t.useRef)(null),n=e===!0,[u,B]=(0,t.useState)(!(b.isSafari()&&!n));return(0,t.useEffect)(()=>{l?(s.current?.play(),u||setTimeout(()=>B(!0),500)):s.current?.pause()},[l]),p(f,{children:[d(L,{ref:s,width:"100%",height:"100%",controls:!1,loop:!n&&a,muted:!0,playsInline:!n,poster:o,objectFit:"cover",onPlay:!n&&u?v:void 0,onLoadedMetadata:n?void 0:k,opacity:u?1:0,children:!n&&i?d("source",{src:i,type:"video/mp4"}):null}),!u&&d(y,{src:o,width:"100%",height:"100%",position:"absolute",left:0,objectFit:"cover"})]})}function N(e){let{model:o}=(0,t.useContext)(g);return d($,{...e,...o})}var t,L,E=c(()=>{"use strict";M();C();t=P(V());w();_();m();L=h.withComponent("video")});function I(){let e=window.RM.config?.root;return!e||e==="/"?"":e.slice(-1)!=="/"?e+"/":e}function S(e){if(e.provider_name!=="self")return null;if(!r.readymag_videos_cdn)throw new Error("Videos CDN URL is not exists");let{isDownloadedSource:o=!1,homepageRewrite:a=!1}=typeof window<"u"?window.RM?.common||{}:{};if(o&&!a){let i=I();return{video:`${i}${e.url}`,thumbnail:`${i}${e.thumbnail_url}`}}return{video:`${r.readymag_videos_cdn}/${e.url}`,thumbnail:`${r.readymag_videos_cdn}/${e.thumbnail_url}`}}function Z(e){return e?e.type!=="video/mp4"?"We support only .mp4 format":e.size>r.VIDEOS_UPLOAD_SIZE_LIMT?`Video file size must be less than ${Math.floor(r.VIDEOS_UPLOAD_SIZE_LIMT/1024/1024)} mb`:null:"No suitable file to upload. Please use video file."}function D(e){return!!(e&&e.provider_name==="self")}function j(e){let o=e?.video;if(o)return D(o)?S(o)?.thumbnail:o.thumbnail_url}var T=c(()=>{"use strict";x()});export{$ as a,N as b,E as c,S as d,Z as e,D as f,j as g,T as h};
