import{a as V,b as yt,c as _,d as vt,e as q,f as kt,g as J,h as Lt,i as Q,j as Bt,k as X,l as St}from"https://st-p.rmcdn.net/2ec2f837/dist/c/c-IO2DGY3M.js";import{b as x,c as T,d as g,e as z}from"https://st-p.rmcdn.net/2ec2f837/dist/c/c-KIGG2IAP.js";import{f as K,q as U,t as xt}from"https://st-p.rmcdn.net/2ec2f837/dist/c/c-LCYIYNO6.js";import{a as L,b as M}from"https://st-p.rmcdn.net/2ec2f837/dist/c/c-VIF4NIA4.js";import{b as k,c as G}from"https://st-p.rmcdn.net/2ec2f837/dist/c/c-5VCIEUUR.js";import{a as P,b as bt}from"https://st-p.rmcdn.net/2ec2f837/dist/c/c-DYZTW7WS.js";import{C as N,D as i,E as m,F as w}from"https://st-p.rmcdn.net/2ec2f837/dist/c/c-U4GS6NTD.js";import{a as wt}from"https://st-p.rmcdn.net/2ec2f837/dist/c/c-IFNIQOEY.js";import{b as ft}from"https://st-p.rmcdn.net/2ec2f837/dist/c/c-4GXLZQJD.js";import{a as D,d as ht}from"https://st-p.rmcdn.net/2ec2f837/dist/c/c-JPR5YHB4.js";function Y({isVisible:e,isDarkBackground:o,type:r,onClick:u}){let h=x({opacity:e?1:0,left:r==="left"?e?24:-40:"auto",right:r==="right"?e?24:-40:"auto"}),b=`lightbox-arrow-${r}`;return m(At,{"data-testid":b,position:"absolute",top:"50%",marginTop:"-4rm",zIndex:3100,onClick:u,style:h,variant:"clean",children:[i(L,{id:b,children:r==="left"?"Previous":"Next"}),r==="left"?o?i(V,{}):i(q,{}):o?i(_,{}):i(J,{})]})}function It({isVisible:e,isDarkBackground:o,onPrev:r,onNext:u}){return m(N,{children:[i(Y,{isVisible:e,isDarkBackground:o,type:"left",onClick:r}),i(Y,{isVisible:e,isDarkBackground:o,type:"right",onClick:u})]})}var At,Z,j=D(()=>{"use strict";G();yt();vt();z();kt();Lt();M();w();At=g(k);Z=It});function tt(e){let o=x({opacity:e.isVisible?1:0});return m(Ct,{"data-testid":"lightbox-cross",onClick:e.onClick,position:"absolute",right:"2rm",top:"2rm",zIndex:3100,style:o,variant:"clean",children:[i(L,{id:"lightbox-cross",children:"Close"}),e.isDarkBackground?i(Q,{}):i(X,{})]})}var Ct,ot=D(()=>{"use strict";G();z();Bt();St();M();w();Ct=g(k)});function Dt({mode:e,isVisible:o,slides:r,onClose:u,index:n,onSlideChange:c,originRect:h}){let[b,et]=(0,s.useState)("prev"),l=(0,s.useMemo)(()=>r[n],[r,n]),[E,B]=(0,s.useState)(!1),[a,it]=(0,s.useState)(!1),f=(0,s.useMemo)(()=>r.map((t,d)=>t.gallery?d:null).filter(t=>t!==null),[r]),S=r.length>1&&l.gallery,{isImageLoaded:rt,preloadImage:nt}=Pt(),R=rt(l.imgSrc)||E&&a&&nt(l.imgSrc),H=R?"zoom-out":"wait",[A,st]=(0,s.useState)({height:window.innerHeight,width:window.innerWidth});function W(){st({height:window.innerHeight,width:window.innerWidth})}let at=(0,s.useMemo)(()=>{let{r:t,g:d,b:p,a:C}=K(l.color);return`rgba(${t}, ${d}, ${p}, ${C})`},[l.color]),lt=x({opacity:o?1:0}),$=(0,s.useMemo)(()=>{let{top:t=0,left:d=0,...p}=h;return{...p,top:`${t*100/A.height}%`,left:`${d*100/A.width}%`,opacity:0}},[h,A]),ct=T(o,null,{from:$,enter:{top:"50%",left:"50%",height:l.height,width:l.width,opacity:1},leave:S?{opacity:0}:$,onDestroyed:t=>{it(!t),B(!t)}}),dt=T(l,t=>t._id,{immediate:!a,from:{opacity:0,left:b==="next"?"100%":"-100%"},enter:{opacity:1,left:"0%"},leave:{opacity:0,left:b==="next"?"-100%":"100%"},onDestroyed:()=>{E||B(!0)}});function y(t){if(!S||!c)return;B(!1),et(t);let d=f.indexOf(n),p=t==="next"?d+1:d-1;t==="next"?p<f.length?c(f[p]):c(f[0]):p>=0?c(f[p]):c(f[f.length-1])}function v(){a&&u&&u()}function I(t){switch(t.key){case"Escape":v();break;case"ArrowLeft":y("prev");break;case"ArrowRight":y("next");break;default:break}}(0,s.useEffect)(()=>(window.addEventListener("resize",W),e==="viewer"&&a&&(o?window.addEventListener("keyup",I):window.removeEventListener("keyup",I)),()=>{window.removeEventListener("resize",W),window.removeEventListener("keyup",I)}),[o,l,a]);let O=(0,s.useMemo)(()=>U(l.color),[l]);return m(P,{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",zIndex:2999,pointerEvents:a?"all":"none",children:[i(tt,{isDarkBackground:!O,isVisible:o&&a,onClick:v}),e==="viewer"&&S&&i(Z,{isDarkBackground:!O,isVisible:o&&a,onPrev:()=>y("prev"),onNext:()=>y("next")}),i(g.div,{onClick:v,style:{backgroundColor:at,position:"absolute",zIndex:0,width:"100%",height:"100%",transition:".3s background-color",cursor:H,...lt}}),dt.map(({item:t,key:d,props:p})=>i(g.div,{onClick:v,style:{position:"absolute",zIndex:10,width:"100%",height:"100%",cursor:H,...p},children:ct.map(({item:C,key:pt,props:{height:gt,width:ut,...mt}})=>{if(!C)return null;let F={position:"absolute",transform:"translate(-50%, -50%)",height:o&&a||!o&&a&&t.gallery?t.height:gt,width:o&&a||!o&&a&&t.gallery?t.width:ut,...mt};return m(P,{children:[R&&i(g.img,{style:{...F,zIndex:20},src:t.imgSrc}),i(g.img,{"data-testid":"lightbox-image",style:{...F,zIndex:10,filter:"blur(0.4px)"},src:t.previewImgSrc})]},pt)})},d))]})}function Pt(){let[e,o]=(0,s.useState)({});function r(n){if(e.hasOwnProperty(n))return e[n];let c=new Image;c.onload=()=>{o({...e,[n]:!0})},c.onerror=()=>{let h={...e};delete h[n],o(h)},c.src=n,o({...e,[n]:!1})}function u(n){return e.hasOwnProperty(n)?e[n]:!1}return{isImageLoaded:u,preloadImage:r}}var s,eo,Tt=D(()=>{"use strict";s=ht(wt());bt();z();ft();xt();j();ot();w();eo=Dt});export{eo as a,Tt as b};
