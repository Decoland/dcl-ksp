import{a as O}from"https://st-p.rmcdn.net/2ec2f837/dist/c/c-ACKL65WM.js";import{a as F}from"https://st-p.rmcdn.net/2ec2f837/dist/c/c-QYNXYUCD.js";import"https://st-p.rmcdn.net/2ec2f837/dist/c/c-5BXBQDCA.js";import"https://st-p.rmcdn.net/2ec2f837/dist/c/c-S7HI7YZY.js";import"https://st-p.rmcdn.net/2ec2f837/dist/c/c-EKH35OWM.js";import{a as k,b as A,c as G,d as z,e as q,f as J,g as K,h as Q}from"https://st-p.rmcdn.net/2ec2f837/dist/c/c-4FD72MDV.js";import{b as $,e as m,f as H}from"https://st-p.rmcdn.net/2ec2f837/dist/c/c-YRJCEVW5.js";import"https://st-p.rmcdn.net/2ec2f837/dist/c/c-VQHT7MPJ.js";import"https://st-p.rmcdn.net/2ec2f837/dist/c/c-NY5UA4K4.js";import"https://st-p.rmcdn.net/2ec2f837/dist/c/c-PNCKNKEJ.js";import"https://st-p.rmcdn.net/2ec2f837/dist/c/c-I3VIZU5O.js";import"https://st-p.rmcdn.net/2ec2f837/dist/c/c-X5TEAUQY.js";import"https://st-p.rmcdn.net/2ec2f837/dist/c/c-SYUA2OEY.js";import"https://st-p.rmcdn.net/2ec2f837/dist/c/c-C26TWWIP.js";import"https://st-p.rmcdn.net/2ec2f837/dist/c/c-VEO53IIJ.js";import"https://st-p.rmcdn.net/2ec2f837/dist/c/c-OCOXHK6L.js";import{a as _,b as pe}from"https://st-p.rmcdn.net/2ec2f837/dist/c/c-CJWDEEWW.js";import"https://st-p.rmcdn.net/2ec2f837/dist/c/c-ZJAYGQDZ.js";import"https://st-p.rmcdn.net/2ec2f837/dist/c/c-LVCOVV6I.js";import"https://st-p.rmcdn.net/2ec2f837/dist/c/c-ZQHIRCMZ.js";import"https://st-p.rmcdn.net/2ec2f837/dist/c/c-TFUSHE37.js";import"https://st-p.rmcdn.net/2ec2f837/dist/c/c-C25CDSVT.js";import"https://st-p.rmcdn.net/2ec2f837/dist/c/c-6BD5TTOJ.js";import"https://st-p.rmcdn.net/2ec2f837/dist/c/c-74B2MAD5.js";import"https://st-p.rmcdn.net/2ec2f837/dist/c/c-HJ6CUHFE.js";import{a as X}from"https://st-p.rmcdn.net/2ec2f837/dist/c/c-PQZNPZQF.js";import{a as R}from"https://st-p.rmcdn.net/2ec2f837/dist/c/c-LYI5UDUS.js";import"https://st-p.rmcdn.net/2ec2f837/dist/c/c-FWKHFFLT.js";import"https://st-p.rmcdn.net/2ec2f837/dist/c/c-CEE6JRRP.js";import"https://st-p.rmcdn.net/2ec2f837/dist/c/c-4GUX7PNR.js";import"https://st-p.rmcdn.net/2ec2f837/dist/c/c-F5AYKP4G.js";import"https://st-p.rmcdn.net/2ec2f837/dist/c/c-WQ3T6SEL.js";import"https://st-p.rmcdn.net/2ec2f837/dist/c/c-FUOLYZXL.js";import"https://st-p.rmcdn.net/2ec2f837/dist/c/c-KIGG2IAP.js";import"https://st-p.rmcdn.net/2ec2f837/dist/c/c-VPALJOGY.js";import"https://st-p.rmcdn.net/2ec2f837/dist/c/c-ACVELIJK.js";import"https://st-p.rmcdn.net/2ec2f837/dist/c/c-YXKJRGVL.js";import"https://st-p.rmcdn.net/2ec2f837/dist/c/c-XXPSEXK3.js";import"https://st-p.rmcdn.net/2ec2f837/dist/c/c-4XGHQAZT.js";import"https://st-p.rmcdn.net/2ec2f837/dist/c/c-TMFZW6VH.js";import"https://st-p.rmcdn.net/2ec2f837/dist/c/c-CO6GTOAM.js";import"https://st-p.rmcdn.net/2ec2f837/dist/c/c-CYXA3BXV.js";import{s as I,u as ce}from"https://st-p.rmcdn.net/2ec2f837/dist/c/c-KODFG4HI.js";import"https://st-p.rmcdn.net/2ec2f837/dist/c/c-2ZCUOARI.js";import"https://st-p.rmcdn.net/2ec2f837/dist/c/c-PKRLFX57.js";import"https://st-p.rmcdn.net/2ec2f837/dist/c/c-MDQFU5S5.js";import{n as x,p as me}from"https://st-p.rmcdn.net/2ec2f837/dist/c/c-JPJNOQMB.js";import"https://st-p.rmcdn.net/2ec2f837/dist/c/c-5U7VAUQ6.js";import"https://st-p.rmcdn.net/2ec2f837/dist/c/c-COTV32KC.js";import"https://st-p.rmcdn.net/2ec2f837/dist/c/c-TXGYFWSE.js";import"https://st-p.rmcdn.net/2ec2f837/dist/c/c-TBNAP3ZY.js";import"https://st-p.rmcdn.net/2ec2f837/dist/c/c-H3ILHJQN.js";import"https://st-p.rmcdn.net/2ec2f837/dist/c/c-OSYQOFPB.js";import"https://st-p.rmcdn.net/2ec2f837/dist/c/c-LCYIYNO6.js";import"https://st-p.rmcdn.net/2ec2f837/dist/c/c-LDGS2NF6.js";import"https://st-p.rmcdn.net/2ec2f837/dist/c/c-Z5UHY6B5.js";import{a as L,b as ue}from"https://st-p.rmcdn.net/2ec2f837/dist/c/c-LAZGP36N.js";import{a as W,b as ge}from"https://st-p.rmcdn.net/2ec2f837/dist/c/c-5JO3MCTM.js";import"https://st-p.rmcdn.net/2ec2f837/dist/c/c-YF45PYG6.js";import"https://st-p.rmcdn.net/2ec2f837/dist/c/c-NBLXCZEY.js";import"https://st-p.rmcdn.net/2ec2f837/dist/c/c-OOK62FBD.js";import"https://st-p.rmcdn.net/2ec2f837/dist/c/c-N3B3LOCJ.js";import"https://st-p.rmcdn.net/2ec2f837/dist/c/c-677Q7HGT.js";import"https://st-p.rmcdn.net/2ec2f837/dist/c/c-ZJQTAIWK.js";import{c as B,d as ae}from"https://st-p.rmcdn.net/2ec2f837/dist/c/c-BJERVUPP.js";import"https://st-p.rmcdn.net/2ec2f837/dist/c/c-QE7PLCIB.js";import{a as ie}from"https://st-p.rmcdn.net/2ec2f837/dist/c/c-55VHH3PS.js";import"https://st-p.rmcdn.net/2ec2f837/dist/c/c-C4AIFUO4.js";import"https://st-p.rmcdn.net/2ec2f837/dist/c/c-5VCIEUUR.js";import"https://st-p.rmcdn.net/2ec2f837/dist/c/c-ZKJOYTOA.js";import"https://st-p.rmcdn.net/2ec2f837/dist/c/c-DYZTW7WS.js";import"https://st-p.rmcdn.net/2ec2f837/dist/c/c-YO7WEKGL.js";import"https://st-p.rmcdn.net/2ec2f837/dist/c/c-OIKYUKGZ.js";import"https://st-p.rmcdn.net/2ec2f837/dist/c/c-SQKOFC7D.js";import"https://st-p.rmcdn.net/2ec2f837/dist/c/c-CVGBW63P.js";import"https://st-p.rmcdn.net/2ec2f837/dist/c/c-3JAOSRQL.js";import"https://st-p.rmcdn.net/2ec2f837/dist/c/c-7DXJRK74.js";import"https://st-p.rmcdn.net/2ec2f837/dist/c/c-XRLVLLYR.js";import"https://st-p.rmcdn.net/2ec2f837/dist/c/c-USQQUCAC.js";import"https://st-p.rmcdn.net/2ec2f837/dist/c/c-7YX7KLXS.js";import"https://st-p.rmcdn.net/2ec2f837/dist/c/c-SHDW6QEL.js";import"https://st-p.rmcdn.net/2ec2f837/dist/c/c-K3VMNJLR.js";import"https://st-p.rmcdn.net/2ec2f837/dist/c/c-SU2NNAPL.js";import"https://st-p.rmcdn.net/2ec2f837/dist/c/c-DUOY7Q5L.js";import"https://st-p.rmcdn.net/2ec2f837/dist/c/c-KYPTAB4E.js";import"https://st-p.rmcdn.net/2ec2f837/dist/c/c-CWWG3PHG.js";import{a as N,b as se}from"https://st-p.rmcdn.net/2ec2f837/dist/c/c-CBWNWAZK.js";import"https://st-p.rmcdn.net/2ec2f837/dist/c/c-HHYXIBPX.js";import"https://st-p.rmcdn.net/2ec2f837/dist/c/c-UWYBG7UU.js";import"https://st-p.rmcdn.net/2ec2f837/dist/c/c-3SINCH5B.js";import"https://st-p.rmcdn.net/2ec2f837/dist/c/c-NVZHNET7.js";import"https://st-p.rmcdn.net/2ec2f837/dist/c/c-5YHS57LW.js";import"https://st-p.rmcdn.net/2ec2f837/dist/c/c-QV7VCXGU.js";import"https://st-p.rmcdn.net/2ec2f837/dist/c/c-IZAC2OLR.js";import"https://st-p.rmcdn.net/2ec2f837/dist/c/c-MJ34YYKA.js";import{C as E,D as s,F as y}from"https://st-p.rmcdn.net/2ec2f837/dist/c/c-U4GS6NTD.js";import{a as j}from"https://st-p.rmcdn.net/2ec2f837/dist/c/c-IFNIQOEY.js";import"https://st-p.rmcdn.net/2ec2f837/dist/c/c-ZACCG5AA.js";import"https://st-p.rmcdn.net/2ec2f837/dist/c/c-UTFVTVGR.js";import"https://st-p.rmcdn.net/2ec2f837/dist/c/c-45DYIENQ.js";import{b as l,c as ne}from"https://st-p.rmcdn.net/2ec2f837/dist/c/c-DHS3XUYJ.js";import"https://st-p.rmcdn.net/2ec2f837/dist/c/c-5NXMLTLE.js";import"https://st-p.rmcdn.net/2ec2f837/dist/c/c-USIQRDD3.js";import{a as oe}from"https://st-p.rmcdn.net/2ec2f837/dist/c/c-V5DTUMCE.js";import"https://st-p.rmcdn.net/2ec2f837/dist/c/c-WPVKPCDO.js";import"https://st-p.rmcdn.net/2ec2f837/dist/c/c-3WKB4E5O.js";import"https://st-p.rmcdn.net/2ec2f837/dist/c/c-4GXLZQJD.js";import{a as U,b as re}from"https://st-p.rmcdn.net/2ec2f837/dist/c/c-APCK7IAZ.js";import{d as P}from"https://st-p.rmcdn.net/2ec2f837/dist/c/c-JPR5YHB4.js";var te=P(ie());ge();re();pe();var v=P(j());se();var d=P(j());var h=P(oe());ue();me();ne();ae();ce();y();function de(t){if(!l.isScreenshot){if(!window.RM.common.isDownloadedSource){let i=window.RM?.common?.isDomainViewer===!0;l.isProd&&!i&&import("https://st-p.rmcdn.net/2ec2f837/dist/c/c-2TGC4VU5.js").then(({getWebVitals:p})=>{p()}),x(t.num_id)}let o=new F;window.RM.analytics=o,window.RM.analytics&&(window.RM.analytics._triggerProjectView=!0)}}function b(t,o){let i=o?o.replace(/^\//,"")+(/\/$/.test(o)?"":"/"):"";return typeof t=="string"?t.replace(i,""):t}function we({location:t,history:o,isDomainForUser:i,isDomainViewer:p,isDownloadedSource:c,isHomepage:w,exportBasePath:u}){let g={environment:l.environment.viewer,navigate:(a,n)=>{n.replace?o.replace(a):o.push(a)},setUrlString:(a={})=>{let n=r.currentPage,e;if(p&&!i||c?e="":e=g.getMagUri(),n&&n.num!==1&&(e+=(n.pagePath||n.uri||n.num.toString())+"/"),e===o.location.pathname)return;let f=(parseInt(h.default.last(o.location.pathname.split("/"))||"",10)||1)===n.num||a.replace;c&&u&&!e.startsWith(u)&&(e=u+(/\/$/.test(u)?"":"/")+e.replace(/^\//,"")),c&&h.default.last(e)!=="/"&&(e+="/"),!w&&g.navigate(`${e[0]!=="/"?"/":""}${e}${t.search}`,{replace:f})},setTitle:()=>{if(!r||!r.currentPage)return;let a=L.getFinalSEO(r.currentPage,r,{customDomain:!!p});document.title=a.title||""},getMagUri:()=>i?(r.uri||r.num_id)+"/":p?"":h.default.isEmpty(r.user)?`${r.num_id}/`:`${r.user.uri}/${r.uri||r.num_id}/`,goBack:()=>{o.goBack()},go:(a=1,n)=>{if(n.isPageNum){r.showPage(a,n);return}let e=c?r.getPageByPath(b(a,u))||{}:r.getPageByPath(a)||{};r.showPage(e.num||a,n)},restartMag:()=>{window.location.reload()},onError:()=>{r&&g.go(1,{animation:!1})}},r=new H(window.ServerData.mags.mag,g);return r}function le({pageUri:t}){let{isDomainViewer:o,domainForUser:i,project:p,isDownloadedSource:c,homepageRewrite:w,exportBasePath:u}=(0,d.useContext)(R),[g,r]=(0,d.useState)(null),a=q(),n=z();return(0,d.useEffect)(()=>{if(g){let e=c?g.getPageByPath(b(t,u)||"1"):g.getPageByPath(t||"1");e&&g.currentPage!==e&&g.showPage(e.num)}},[t]),(0,d.useEffect)(()=>{if(p){m.setTiming("mag_loaded",Date.now());let e=we({location:a,history:n,isDomainViewer:o,isDownloadedSource:c,isDomainForUser:i,isHomepage:w,exportBasePath:u});r(e),window.RM.viewerRouter={mag:e,environment:l.environment.viewer,createMagFromTemplate:async(D,M)=>{let{default:V}=await import("https://st-p.rmcdn.net/2ec2f837/dist/c/c-JM7NXJQS.js");new V({router:window.RM.viewerRouter,me:window.RM?.data?.usersLoader?.me,tp:D,templateID:M})}},de(e),e.hasNewTextWidgets()&&I("viewer");let S=c&&t?b(t,u):t||"1",f=e.getPageByPath(S)||e.getPage(S)||{},T=e.model?.attributes?.usedWidgetTypes;$(T?.length?T:B.usedWidgets(e.pages||[],e.aboveGlobalWidgetsData)).finally(()=>{e.render(),e.showPage(f?f.num:1),m.setTiming("mag_rendered",Date.now());let D=e.currentPage.num,M=e.pages.reduce((V,C)=>V+(C.widgets?C.widgets.length:0),0)+e.aboveGlobalWidgets.length;setTimeout(()=>{m.setTiming("dom_complete",window.performance.timing.domComplete),m.sendTimings({projectNumId:e.num_id,userNumId:e.user.num_id,viewport:e.viewport,startPage:D,widgetsCount:M})},1e4)})}},[]),s(E,{})}function fe(){let{pageUri:t}=J();return s(le,{pageUri:t})}var Z=fe;y();function Pe(t){let o=[];if(t.isDomainViewer?t.isDomainForUser?o.push("/:mag/:pageUri*"):o.push("/:pageUri*"):(o.push("/:user/:project/num/:pageNum"),o.push("/:user/:project/:pageUri*")),t.isDownloadedSource&&(o.push("/:pageUri*"),/msie [6-9]/i.test(navigator.userAgent)&&typeof window<"u"))throw window.location.href="sorry.html",new Error("Readymag does not support IE");return o}function ye({ssr:t,location:o,children:i}){return t?s(A,{location:o,children:i}):s(K,{children:i})}function Re({location:t,ssr:o,...i}){let[p,c]=(0,v.useState)([]);(0,v.useEffect)(()=>{let u=Pe({isDomainViewer:i.isDomainViewer,isDomainForUser:i.domainForUser,isDownloadedSource:i.isDownloadedSource});c(u),m.setTiming("dom_loaded",window.performance.timing.domLoading),m.setTiming("scripts_loaded",window.performance.timing.domContentLoadedEventEnd),m.setTiming("router_init",Date.now())},[]);let w=i.errorPage?s(X,{type:i.errorPage}):s(ye,{ssr:o,location:t,children:s(G,{children:s(k,{path:p,children:s(Z,{})})})});return s(R.Provider,{value:i,children:s(N,{children:w})})}function ee(){Q(Re)}RM.common={...RM.common,...window.viewerConfig};W.setSupportedFormats();window.onload=()=>{document.querySelector("html").classList.add("page-loaded")};m.setTiming("viewer_start",Date.now());U.setPageClass();window.Backbone=O(te.default);m.setTiming("router_create",Date.now());_.init(window.ServerData&&window.ServerData.userPermissions);ee();
